<div class="hero-carousel">
    <div class="hero-slides-container">
      @for (slide of mediaList(); track slide.id; let i = $index) {
        <div class="hero-slide" [class.active]="currentSlide().id === slide.id">
          <picture>
            @if (slide.banner) {
              <!-- WebP version -->
              <source 
                [srcset]="getSrcSet(slide, true)"
                [sizes]="getSizes()"
                type="image/webp">
              <!-- Original image -->
              <img
                [src]="getSafeUrl(slide.banner)"
                [srcset]="slide.banner + ' 1920w'"
                [sizes]="getSizes()"
                [attr.loading]="i === 0 ? 'eager' : 'lazy'"
                fetchpriority="high"
                [width]="slide.bannerWidth || 1920"
                [height]="slide.bannerHeight || 400"
                [alt]="slide.engtitle || slide.romtitle"
                [attr.importance]="i === 0 ? 'high' : 'low'"
                decoding="async"
              />
            } @else {
              <!-- WebP version -->
              <source 
                [srcset]="getSrcSet(slide, false)"
                [sizes]="getSizes()"
                type="image/webp">
              <!-- Original image -->
              <img
                [src]="getSafeUrl(slide.coverimage)"
                [srcset]="slide.coverimage + ' 1920w'"
                [sizes]="getSizes()"
                [attr.loading]="i === 0 ? 'eager' : 'lazy'"
                fetchpriority="high"
                width="1920"
                height="400"
                [alt]="slide.engtitle || slide.romtitle"
                class="blurred"
                [attr.importance]="i === 0 ? 'high' : 'low'"
                decoding="async"
              />
            }
          </picture>
          <div class="hero-slide-content">
            <h1>{{ slide.engtitle ? slide.engtitle : slide.romtitle }}</h1>
            <p [innerHTML]="truncateWithEllipsis(slide.description, 300)"></p>
          </div>
        </div>
      }
    </div>
    <div class="hero-indicators">
      @for (slide of mediaList(); track slide.id; let i = $index) {
        <button
          class="hero-indicator"
          [class.active]="currentIndex() === i"
          (click)="goToSlide(i)"
          [disabled]="isAnimating()"
        >
          <span class="sr-only">Slide {{ i + 1 }}</span>
        </button>
      }
    </div>
  </div>